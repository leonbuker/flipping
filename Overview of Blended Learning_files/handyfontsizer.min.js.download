/**
 # ------------------------------------------------------------------------
 * HANDY FONT SIZER
 # ------------------------------------------------------------------------
 * @package      mod_handy_font_sizer
 * @version      1.0
 * @created      August 2015
 * @author       Clutch Design
 * @email        admin@clutchdesign.net
 * @websites     http://clutchdesign.net
 * @copyright    Copyright (C) 2015 Joomla Pro. All rights reserved.
 * @license      GNU General Public License version 2, or later
 # ------------------------------------------------------------------------
**/

(function($) {
  $.fn.handyfontsizer = function(opcoes) {
    var $this = $(this);
    var defaults = {
      btnMinusClasseId: '#handyfontsizer-minus',
      btnDefaultClasseId: '#handyfontsizer-default',
      btnPlusClasseId: '#handyfontsizer-plus',
      btnMinusMaxHits: 10,
      btnPlusMaxHits: 10,
      sizeChange: 1
    };
    if (opcoes) {
      opcoes = $.extend(defaults, opcoes)
    };
    var limite = new Array();
    var fontsize_padrao = new Array();
    $(this).each(function(i) {
      limite[i] = 0;
      fontsize_padrao[i];
    });
    // $(opcoes.btnMinusClasseId + ', ' + opcoes.btnDefaultClasseId + ', ' + opcoes.btnPlusClasseId).removeAttr('href');
    $(opcoes.btnMinusClasseId + ', ' + opcoes.btnDefaultClasseId + ', ' + opcoes.btnPlusClasseId).css('cursor', 'pointer');
    $(opcoes.btnMinusClasseId).click(function() {
      $(opcoes.btnPlusClasseId).removeClass('handyfontsizer-disabled');
      $this.each(function(i) {
        if (limite[i] > (-(opcoes.btnMinusMaxHits))) {
          fontsize_padrao[i] = $(this).css('font-size');
          fontsize_padrao[i] = fontsize_padrao[i].replace('px', '');
          fontsize = $(this).css('font-size');
          fontsize = parseInt(fontsize.replace('px', ''));
          fontsize = fontsize - (opcoes.sizeChange);
          fontsize_padrao[i] = fontsize_padrao[i] - (limite[i] * opcoes.sizeChange);
          limite[i]--;
          $(this).css('font-size', fontsize + 'px');
          if (limite[i] == (-(opcoes.btnMinusMaxHits))) {
            $(opcoes.btnMinusClasseId).addClass('handyfontsizer-disabled');
          }
        }
      })
    });
    $(opcoes.btnDefaultClasseId).click(function() {
      $(opcoes.btnMinusClasseId).removeClass('handyfontsizer-disabled');
      $(opcoes.btnPlusClasseId).removeClass('handyfontsizer-disabled');
      $this.each(function(i) {
        limite[i] = 0;
        $(this).css('font-size', fontsize_padrao[i] + 'px');
      })
    });
    $(opcoes.btnPlusClasseId).click(function() {
      $(opcoes.btnMinusClasseId).removeClass('handyfontsizer-disabled');
      $this.each(function(i) {
        if (limite[i] < opcoes.btnPlusMaxHits) {
          fontsize_padrao[i] = $(this).css('font-size');
          fontsize_padrao[i] = fontsize_padrao[i].replace('px', '');
          fontsize = $(this).css('font-size');
          fontsize = parseInt(fontsize.replace('px', ''));
          fontsize = fontsize + opcoes.sizeChange;
          fontsize_padrao[i] = fontsize_padrao[i] - (limite[i] * opcoes.sizeChange);
          limite[i]++;
          $(this).css('font-size', fontsize + 'px');
          if (limite[i] == opcoes.btnPlusMaxHits) {
            $(opcoes.btnPlusClasseId).addClass('handyfontsizer-disabled');
          }
        }
      })
    });
  };
})(jQuery);